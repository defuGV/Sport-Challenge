<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="catalog_script_client">
    <catalog_script_client action="INSERT_OR_UPDATE">
        <active>true</active>
        <applies_catalog>true</applies_catalog>
        <applies_extended>false</applies_extended>
        <applies_req_item>false</applies_req_item>
        <applies_sc_task>false</applies_sc_task>
        <applies_target_record>false</applies_target_record>
        <applies_to>item</applies_to>
        <cat_item display_value="Request to participate in Sport Challenges">647f524597b7111010c67b771153afe6</cat_item>
        <cat_variable/>
        <condition/>
        <description/>
        <field/>
        <global>true</global>
        <isolate_script>true</isolate_script>
        <messages/>
        <name>Catalog form</name>
        <order/>
        <script><![CDATA[function onLoad() {
	//validate phone number: rule start with + and no letters 
	g_scratchpad.validatePhone = function(value) {
		return /^[+]{1}[1-9][0-9]{7,14}$/.test(value);
	};
	//validate sim card ID: 20 characters digits only
	g_scratchpad.validateSimId = function(value) {
		return /^[0-9]{20}$/.test(value);
	};
}

// Set visibility for variables on the Catalog form
// Using this way of function declaration makes it accessible in the window object, so it can be used in ALL Catalog Client Scripts.
showVariables = function(newValue) {
    var formStructure = {
        // here only basic setup for different actions (section initiation). further variable setup please check UI policy
        "new": {
            "container_begin_3": {},
            "container_label_3": {},
            "container_begin_4": {},
        },
        "change": {
            "container_begin_3": {},
            "container_begin_5": {},
            "container_begin_6": {}
        },
        "service": {
            "container_begin_3": {},
            "container_begin_5": {},
            "container_begin_7": {}
        },
        "cancel": {
            "container_begin_3": {},
            "container_label_3": {},
            "container_begin_5": {},
            "container_label_5": {}
        },
        "other": {}
    };


    hideVariables();

    if (newValue != "") {
        buildForm(formStructure[newValue]);
    }
};

// Show variables and sections based on the selected action. Configure all visible variables to match the action.
function buildForm(configuration) {
    var variablesArr = Object.keys(configuration);

    for (var i = 0; i < variablesArr.length; i++) {
        var variableName = variablesArr[i];
        g_form.setVisible(variableName, true);
        if (configuration[variableName].mandatory) {
            g_form.setMandatory(variableName, configuration[variableName].mandatory);
        }
        if (configuration[variableName].readOnly) {
            g_form.setReadOnly(variableName, configuration[variableName].readOnly);
        }
        if (configuration[variableName].label) {
            g_form.setLabelOf(variableName, configuration[variableName].label);
        }
    }
}
// Hide all variables and sections except action. Clear all values except requested for.
// Using this way of function declaration makes it accessible in the window object, so it can be used in ALL Catalog Client Scripts.
hideVariables = function() {
    var variablesArr = g_form.getFieldNames();
    var actionVariablesArr = ["container_begin_1", "action", "requested_for", "user_location"];

    for (var i = 0; i < variablesArr.length; i++) {
        if (actionVariablesArr.indexOf(variablesArr[i]) == -1 && variablesArr[i].indexOf("item_") == -1) {
            g_form.setMandatory(variablesArr[i], false);
            g_form.setVisible(variablesArr[i], false);
            if (variablesArr[i] != "requested_for") {
                g_form.clearValue(variablesArr[i]);
            }
        }
    }
};]]></script>
        <sys_class_name>catalog_script_client</sys_class_name>
        <sys_created_by>admin_gv_dluo</sys_created_by>
        <sys_created_on>2023-09-05 11:22:32</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_domain_path>/</sys_domain_path>
        <sys_id>643d0ad647013110c1535e52e36d4365</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Catalog form</sys_name>
        <sys_overrides/>
        <sys_package display_value="[GVS] Sport Challenge" source="x_933235_gvs_sport">6f13f8ed97c3111010c67b771153afd9</sys_package>
        <sys_policy/>
        <sys_scope display_value="[GVS] Sport Challenge">6f13f8ed97c3111010c67b771153afd9</sys_scope>
        <sys_update_name>catalog_script_client_643d0ad647013110c1535e52e36d4365</sys_update_name>
        <sys_updated_by>admin_gv_dluo</sys_updated_by>
        <sys_updated_on>2023-09-05 11:22:32</sys_updated_on>
        <table/>
        <type>onLoad</type>
        <ui_type>10</ui_type>
        <variable_set/>
        <view/>
    </catalog_script_client>
</record_update>
